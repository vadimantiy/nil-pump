"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBlockByNumber = getBlockByNumber;
const interceptors_1 = require("../interceptors");
const conversion_1 = require("../utils/conversion");
async function getBlockByNumber(method, params, context) {
    const preparedParams = prepareInput(params, context);
    if (context.debug) {
        console.log(`Method ${method} params ${JSON.stringify(preparedParams)}`);
    }
    const response = await (0, interceptors_1.executeOriginalFunction)(method, preparedParams, context);
    const result = adaptResponse(response);
    if (context.debug) {
        console.log(`Response ${JSON.stringify(result)}`);
    }
    return result;
}
function prepareInput(params, context) {
    return [(0, conversion_1.shardNumber)(context.wallet.getAddressHex()), ...params];
}
function adaptResponse(response) {
    if ("number" in response && typeof response.number === "number") {
        response.number = `0x${response.number.toString(16)}`;
    }
    return response;
}
