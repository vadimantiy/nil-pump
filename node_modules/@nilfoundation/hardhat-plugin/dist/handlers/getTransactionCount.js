"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getTransactionCount = getTransactionCount;
const interceptors_1 = require("../interceptors");
const conversion_1 = require("../utils/conversion");
async function getTransactionCount(method, params, context) {
    const preparedParams = await prepareInput(params, context);
    if (context.debug) {
        console.log(`Method ${method} params ${JSON.stringify(preparedParams)}`);
    }
    const result = await (0, interceptors_1.executeOriginalFunction)(method, preparedParams, context);
    if (context.debug) {
        console.log(`Response params ${JSON.stringify(result)}`);
    }
    return result;
}
async function prepareInput(params, context) {
    const address = await context.signer.getAddress(context.hre.config.shardId ?? (0, conversion_1.shardNumber)(context.wallet.getAddressHex())); // Simulate async call if necessary
    return [`0x${Buffer.from(address).toString("hex")}`, "latest"];
}
