"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.blockNumber = blockNumber;
const interceptors_1 = require("../interceptors");
const conversion_1 = require("../utils/conversion");
async function blockNumber(method, params, context) {
    const preparedMethod = "eth_getBlockByNumber";
    if (context.debug) {
        console.log("Method", preparedMethod);
    }
    const result = await (0, interceptors_1.executeOriginalFunction)(preparedMethod, prepareInput(context), context);
    const adaptResponse = adaptResult(result);
    if (context.debug) {
        console.log("Response", JSON.stringify(adaptResponse));
    }
    return adaptResponse;
}
function prepareInput(context) {
    return [
        context.hre.config.shardId ?? (0, conversion_1.shardNumber)(context.wallet.getAddressHex()),
        "latest",
        false,
    ];
}
function adaptResult(result) {
    if (!result) {
        return "0x0";
    }
    return result.number;
}
